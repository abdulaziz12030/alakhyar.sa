<!DOCTYPE html><html lang="ar" dir="rtl"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>لوحة تحكم قوافل الأخيار</title><style>body{margin:0;font-family:'Cairo',sans-serif;background:#0B1220;color:#E2E8F0;display:flex;flex-direction:column;height:100vh}header.dashboard-header{background:#020617;padding:10px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #1E293B}header .dashboard-logo{width:48px;height:48px;border-radius:10px;margin-left:10px}header .dashboard-title{color:#FFD46B;font-size:20px;margin:0}header .admin-key-input{padding:6px 10px;border-radius:6px;border:1px solid #1E293B;background:#0B1220;color:#fff}header .btn-primary{background:linear-gradient(90deg,#FFD46B,#FEB211);padding:8px 14px;border:none;border-radius:8px;font-weight:bold;cursor:pointer;margin-right:6px}header .btn-primary:disabled{opacity:.5;cursor:not-allowed}.dashboard-wrapper{display:flex;flex:1;overflow:hidden}.sidebar{width:220px;background:#020617;border-left:1px solid #1E293B;padding-top:20px;overflow-y:auto}.sidebar-nav .nav-link{display:block;padding:12px 20px;color:#94A3B8;text-decoration:none;font-size:15px;border-bottom:1px solid #1E293B;transition:.2s}.sidebar-nav .nav-link:hover{background:#1E293B;color:#FFD46B}.sidebar-nav .active{color:#FEB211;background:#1E293B}.dashboard-content{flex:1;padding:20px;overflow-y:auto}.dashboard-section{background:#020617;padding:20px;border-radius:10px;margin-bottom:20px;border:1px solid #1E293B}.dashboard-section h2{margin-top:0;color:#FFD46B}.dashboard-section input,.dashboard-section textarea{width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid #1E293B;background:#0B1220;color:#fff}.dashboard-section textarea{min-height:120px}.dashboard-section button{background:linear-gradient(90deg,#FFD46B,#FEB211);padding:10px 18px;border:none;border-radius:8px;font-weight:bold;cursor:pointer;margin-top:10px}.status-message{padding:10px;margin-bottom:15px;display:none;border-radius:6px}.status-success{background:#14532D;color:#4ADE80}.status-error{background:#7F1D1D;color:#F87171}.service-item,.testimonial-item{background:#0B1220;padding:12px;border-radius:8px;border:1px solid #1E293B;margin-bottom:10px}.upload-result{margin-top:10px;font-size:14px;color:#FFD46B}@media(max-width:800px){.sidebar{width:160px}}</style></head><body><header class="dashboard-header"><div class="header-left"><img src="images/logo.png" class="dashboard-logo"><h1 class="dashboard-title">لوحة تحكم قوافل الأخيار</h1></div><div class="header-right"><input type="password" id="adminKey" class="admin-key-input" placeholder="ADMIN_KEY"><button id="loadBtn" class="btn-primary">تحميل</button><button id="saveBtn" class="btn-primary" disabled>حفظ</button></div></header><div class="dashboard-wrapper"><aside class="sidebar"><nav class="sidebar-nav"><a href="#" class="nav-link active" data-section="hero">الهيرو</a><a href="#" class="nav-link" data-section="about">من نحن</a><a href="#" class="nav-link" data-section="services">الخدمات</a><a href="#" class="nav-link" data-section="testimonials">قالوا عنا</a><a href="#" class="nav-link" data-section="partners">شركاء النجاح</a><a href="#" class="nav-link" data-section="upload">رفع الصور</a></nav></aside><main class="dashboard-content"><div id="status" class="status-message"></div><section id="section-hero" class="dashboard-section"><h2>الهيرو</h2><label>العنوان الرئيسي</label><input id="heroTitleInput"><label>الجمل (كل جملة في سطر)</label><textarea id="heroLinesInput"></textarea><label>صور الهيرو (كل مسار في سطر)</label><textarea id="heroImagesInput"></textarea></section><section id="section-about" class="dashboard-section" style="display:none"><h2>من نحن</h2><label>النص</label><textarea id="aboutTextInput"></textarea></section><section id="section-services" class="dashboard-section" style="display:none"><h2>الخدمات</h2><div id="servicesContainer"></div></section><section id="section-testimonials" class="dashboard-section" style="display:none"><h2>قالوا عنا</h2><div id="testimonialsContainer"></div></section><section id="section-partners" class="dashboard-section" style="display:none"><h2>شركاء النجاح</h2><textarea id="partnersInput"></textarea></section><section id="section-upload" class="dashboard-section" style="display:none"><h2>رفع صورة</h2><input type="file" id="imageFileInput"><input id="imageNameInput" placeholder="اسم الصورة (اختياري)"><button id="uploadBtn">رفع</button><div id="uploadResult"></div></section></main></div><script>let contentData={};function showStatus(msg,success=true){const el=document.getElementById("status");el.textContent=msg;el.className="status-message "+(success?"status-success":"status-error");el.style.display="block";setTimeout(()=>{el.style.display="none"},4000)}document.querySelectorAll(".nav-link").forEach(l=>{l.onclick=e=>{e.preventDefault();document.querySelectorAll(".nav-link").forEach(a=>a.classList.remove("active"));l.classList.add("active");const sec=l.dataset.section;document.querySelectorAll(".dashboard-section").forEach(s=>s.style.display="none");document.getElementById("section-"+sec).style.display="block"}});document.getElementById("loadBtn").onclick=async()=>{const key=document.getElementById("adminKey").value;if(!key)return showStatus("أدخل ADMIN_KEY",false);const r=await fetch("/api/get-content",{headers:{"x-admin-key":key}});if(!r.ok)return showStatus("رمز الإدارة غير صحيح",false);const d=await r.json();contentData=d.content;fillInputs();document.getElementById("saveBtn").disabled=false;showStatus("تم تحميل المحتوى",true)};function fillInputs(){heroTitleInput.value=contentData.heroTitle;heroLinesInput.value=contentData.heroLines.join("\n");heroImagesInput.value=contentData.heroImages.join("\n");aboutTextInput.value=contentData.aboutText;partnersInput.value=contentData.partners.join("\n");renderServices();renderTestimonials()}function renderServices(){const c=document.getElementById("servicesContainer");c.innerHTML="";contentData.services.forEach((s,i)=>{c.innerHTML+=`<div class="service-item"><label>عنوان الخدمة</label><input data-service="${i}" data-field="title" value="${s.title}"><label>صورة الخدمة</label><input data-service="${i}" data-field="image" value="${s.image}"></div>`})}function renderTestimonials(){const c=document.getElementById("testimonialsContainer");c.innerHTML="";contentData.testimonials.forEach((t,i)=>{c.innerHTML+=`<div class="testimonial-item"><label>الاسم</label><input data-testimonial="${i}" data-field="name" value="${t.name}"><label>الحرف</label><input data-testimonial="${i}" data-field="avatar" value="${t.avatar}"><label>النجوم</label><input data-testimonial="${i}" data-field="stars" value="${t.stars}"><label>النص</label><textarea data-testimonial="${i}" data-field="text">${t.text}</textarea></div>`})}document.getElementById("saveBtn").onclick=async()=>{updateContentData();const key=document.getElementById("adminKey").value;const r=await fetch("/api/update-content",{method:"POST",headers:{"x-admin-key":key},body:JSON.stringify({content:contentData})});if(!r.ok)return showStatus("خطأ أثناء الحفظ",false);showStatus("تم حفظ التغييرات بنجاح",true)};function updateContentData(){contentData.heroTitle=heroTitleInput.value;contentData.heroLines=heroLinesInput.value.split("\n");contentData.heroImages=heroImagesInput.value.split("\n");contentData.aboutText=aboutTextInput.value;contentData.partners=partnersInput.value.split("\n");document.querySelectorAll("input[data-service]").forEach(i=>{const idx=i.dataset.service;const f=i.dataset.field;contentData.services[idx][f]=i.value});document.querySelectorAll("[data-testimonial]").forEach(i=>{const idx=i.dataset.testimonial;const f=i.dataset.field;contentData.testimonials[idx][f]=i.value})}document.getElementById("uploadBtn").onclick=async()=>{const file=imageFileInput.files[0];if(!file)return showStatus("اختر صورة",false);const key=document.getElementById("adminKey").value;const reader=new FileReader();reader.onload=async()=>{const base64=reader.result.split(",")[1];const name=imageNameInput.value||file.name;const r=await fetch("/api/upload-image",{method:"POST",headers:{"x-admin-key":key},body:JSON.stringify({fileName:name,base64Data:base64})});const d=await r.json();if(!r.ok)return showStatus("فشل رفع الصورة",false);uploadResult.textContent="تم الرفع: "+d.path;showStatus("تم رفع الصورة",true)};reader.readAsDataURL(file)};</script></body></html>
